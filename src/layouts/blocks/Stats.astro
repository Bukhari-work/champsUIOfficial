---
import type { Stats as Props } from "@/types.ts";
import ComponentWrapper from "@/components/blocks/ComponentWrapper.astro";
import Headline from "@/components/ui-astro/Headline.astro";
import DynamicIcon from "@/components/blocks/DynamicIcon.tsx";

const {
  title = await Astro.slots.render("title"),
  subtitle = await Astro.slots.render("subtitle"),
  tagline,
  stats = [],
  flatBackground,
  id,
  classes = {},
} = Astro.props as Props;
---

<ComponentWrapper
  id={id}
  flatBackground={flatBackground}
  containerClass={`max-w-5xl mx-auto lg:pt-4 ${classes?.container ?? ""}`}
>
  <slot name="bg" slot="bg" />
  <Headline title={title} subtitle={subtitle} tagline={tagline} />

  <div
    class="grid grid-cols-2 gap-x-8 gap-y-6 lg:grid-cols-4 lg:gap-x-0 lg:gap-y-8"
  >
    {
      stats?.map(({ amount, title, description, icon }) => (
        <div
          class:list={[
            "intersect-once motion-safe:md:intersect:animate-fade-in intersect-quarter transition-none motion-safe:md:opacity-0",
            "p-4",
            "border-primary border-b last:border-b-0 [&:nth-last-child(2)]:border-b-0",
            "lg:border-b-0 lg:border-l lg:nth-[4n+1]:border-none",
            "flex flex-col justify-center text-center",
          ]}
        >
          {icon && (
            <div class="mx-auto mb-4 flex items-center justify-center">
              <DynamicIcon icon={icon} className="h-10 w-10" />
            </div>
          )}

          {amount && (
            <div class="mx-auto text-[2.6rem] leading-none font-bold lg:text-5xl xl:text-6xl">
              {amount}
            </div>
          )}

          {title && (
            <div class="mx-auto mt-3 flex flex-wrap justify-center text-sm font-medium tracking-widest uppercase">
              {title}
            </div>
          )}

          {description && (
            <p class="text-muted-foreground mx-auto mt-2 max-w-[22ch] text-sm leading-snug">
              {description}
            </p>
          )}
        </div>
      ))
    }
  </div>
</ComponentWrapper>
